<mat-card class="example-card">
    <form [formGroup]="managerForm" >
    <mat-card-header>
        <mat-card-title *ngIf="manager">{{manager.firstname}} {{manager.lastname}}</mat-card-title>
    </mat-card-header>
    <mat-card-content>
        <mat-form-field appearance="legacy">
            <mat-label>Prénom *</mat-label>
            <input matInput placeholder="Prénom"
                   formControlName="firstname"
                   (change)="onUpdateManager()">
            <mat-error *ngIf="managerForm.controls['firstname'].hasError('required')">
                    Un prénom est requis.
            </mat-error>
        </mat-form-field>
        <mat-form-field appearance="legacy">
            <mat-label>Nom *</mat-label>
            <input matInput placeholder="Nom"
                   formControlName="lastname"
                   (change)="onUpdateManager()">
            <mat-error *ngIf="managerForm.controls['lastname'].hasError('required')">
                    Un nom est requis.
            </mat-error>
        </mat-form-field>
        <mat-form-field appearance="legacy">
            <mat-label>Email *</mat-label>
            <input matInput placeholder="Email"
                   formControlName="email"
                   (change)="onUpdateManager()">
            <mat-error *ngIf="!managerForm.controls['email'].hasError('required') && 
                              (managerForm.controls['email'].hasError('email') || 
                              managerForm.controls['email'].hasError('badDomain') )">
                    La forme de l'adresse mail est erronée.
            </mat-error>
            <mat-error *ngIf="managerForm.controls['email'].hasError('required')">
                    Une adresse mail est requise.
            </mat-error>
        </mat-form-field>

        <mat-slide-toggle (change)="onUpdateManager()" formControlName="admin">Octroyer les droits d'administrateur</mat-slide-toggle>

        <mat-form-field class="releaseDate" appearance="legacy">
            <mat-label>Date de fin d'activité</mat-label>
            <input matInput 
                   type = "date"
                   formControlName="releaseDate"
                   (change)="onReleaseManager()">
            
        </mat-form-field>

    </mat-card-content>
    </form>

    <button  mat-raised-button color="warn" (click)="onDeleteManager(manager.id)">
        <span>Supprimer</span>
    </button>

    <br>
    <br>
</mat-card>
